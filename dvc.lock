schema: '2.0'
stages:
  download:
    cmd: src/1_download.sh
    deps:
    - path: src/1_download.sh
      md5: cb5db5b6a9762d60f6022926fe15c9a3
      size: 352
    outs:
    - path: download/
      md5: a821de6c9e69e2994ff41c0d520b5dfc.dir
      size: 101228756829
      nfiles: 330
  unzip_build:
    cmd: src/2_unzip_build.sh
    deps:
    - path: download/
      md5: a821de6c9e69e2994ff41c0d520b5dfc.dir
      size: 101228756829
      nfiles: 330
    - path: src/2_unzip_build.sh
      md5: 1680f33c8145f29d45f4994e7e54c2a9
      size: 982
    outs:
    - path: data/
      md5: e4872340e3733fb26162eb72961a89a2.dir
      size: 47559950676
      nfiles: 330
  build_compound_sdf:
    cmd: Rscript src/2_build.R
    deps:
    - path: download/
      md5: a821de6c9e69e2994ff41c0d520b5dfc.dir
      size: 101228756829
      nfiles: 330
    - path: src/2_build.R
      md5: a896b545203292601d561218348892b9
      size: 1595
    outs:
    - path: brick/compound/sdf.parquet
      md5: d6b885325abdd3662a50bced057aeab6.dir
      size: 172355460576
      nfiles: 597
  compound_check:
    cmd: bash src/compound/0_check_ftp.sh
    outs:
    - path: cache/compound/sdf/check_ftp.txt
      md5: d5df2a7af73a428725cc08bf15de4ab8
      size: 78994
  compound_download:
    cmd: src/compound/1_download_compound.sh
    deps:
    - path: cache/compound/sdf/check_ftp.txt
      md5: d5df2a7af73a428725cc08bf15de4ab8
      size: 78994
    - path: src/compound/1_download_compound.sh
      md5: b69640135b291b9ca6e9793f6ab1cecd
      size: 232
    outs:
    - path: download/compound/sdf
      md5: 37293fe9fd97392c450de902f92f3ef9.dir
      size: 104839850219
      nfiles: 336
  compound_build_sdf:
    cmd: Rscript src/compound/2_build_compound.R
    deps:
    - path: download/compound/sdf/
      md5: 37293fe9fd97392c450de902f92f3ef9.dir
      size: 104839850219
      nfiles: 336
    - path: src/compound/2_build_compound.R
      md5: 6e963ef3ca11750c4486b4f8cc9c6817
      size: 1966
    outs:
    - path: brick/compound_sdf.parquet
      md5: 68e87c986a6dbdca2dbff6b76276562f.dir
      size: 226657997710
      nfiles: 731
  bioassay_check:
    cmd: bash src/bioassay/0_check_ftp.sh
    outs:
    - path: cache/bioassay/csv/check_ftp.txt
      md5: ca0afe7eba936b77656561d36d0c7eca
      size: 131256
  bioassay_download:
    cmd: src/bioassay/1_download_bioassay.sh
    deps:
    - path: cache/bioassay/csv/check_ftp.txt
      md5: ca0afe7eba936b77656561d36d0c7eca
      size: 131256
    - path: src/bioassay/1_download_bioassay.sh
      hash: md5
      md5: 0dbd0ab833508e8446dd5110fced8fac
      size: 429
    outs:
    - path: download/bioassay/csv
      hash: md5
      md5: df79453594cba17f6055ce07e90905e1.dir
      size: 6857576000
      nfiles: 1649
  bioassay_build:
    cmd: Rscript src/bioassay/2_build_bioassay.R
    deps:
    - path: download/bioassay/csv
      hash: md5
      md5: fc0f701d0ac4e83b852dbf096ad8da05.dir
      size: 6857555465
      nfiles: 1649
    - path: src/bioassay/2_build_bioassay.R
      hash: md5
      md5: bf63e0edcda18e432590147aba2945c3
      size: 4594
    outs:
    - path: brick/bioassay_concise.parquet
      hash: md5
      md5: 0ec6666e46c27180b14da03c82ca3259.dir
      size: 110194688
      nfiles: 1
  annotation_build:
    cmd: python3 src/annotations/annotations.py
    outs:
    - path: brick/cid_annotations.parquet
      hash: md5
      md5: 163290b1eef59ead27a60a0aa8c1f983
      size: 2941304667
